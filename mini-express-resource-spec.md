# 表情输出规范

## 修改历史

|Version |Contributor| Date| Change Log|
|----|:---|:---|:---|
|v1.0|彭钉|17/1/19|Mini表情格式
|v1.1|彭钉|17/1/19|组件命令调整
|v1.2|彭钉|18/02/02|眼睛组件图
|||||

## 一、 表情帧率、尺寸、格式

* 尺寸： 只支持240 x 240, 480 x 240, 如果左右眼一样，直接输出240 x 240; 如果左右眼不一样，输出480 x 240

* 帧率： 480 x 240尺寸不超过25， 240 x 240不超过40

* 支持gif, json两种表情文件格式

* 眼睛组件图

![Aaron Swartz](https://github.com/marklogg/images/blob/master/1619078756.jpg?raw=true)

## 二、JSON表情

### 1、240 x 240规格

#### 上眼皮

* 图形层，命名固定为"UpperEyelid"，不规则图形的控制点数须确保为6个，否则无法过渡

#### 下眼皮

* 图形层，命名固定为"LowerEyelid"，不规则图形的控制点数须确保为6个，否则无法过渡

#### 高光

* 图片层， 命令固定为"Highlight"

#### 反光1

* 图片层，命令固定为"Reflector1"

#### 反光2

* 图片层，命令固定为"Reflector2"

#### 遮罩

* 图片层，命令固定为"Mask"

#### 晶状体

* 图片层，命名固定为"Lens"

#### 虹膜1

* 图形层，命名固定为"Irides1"

#### 虹膜2

* 图形层，命名固定为"Irides2"

#### 眼白

* 图片层，命名固定为"White"

### 2、480 x 240规格

* 480 * 240 Json格式，图层命令同上

## 三、gif表情

* 支持240 x 240, 480 x 240, 如果左右眼一样，直接输出240 x 240， 帧率不超过40; 如果左右眼不一样，输出480 x 240，帧率不超过25

## 四、 表情插入关键帧(过渡)约束

* 表情过渡： 在前一个表情动画未做完时，表情服务又接到一个新的表情显示请求，才会进行表情过渡

* 如果前一个表情是gif表情，在出现表情过渡时，按设计给出的“过渡动画”处理

* Json表情支持的过渡效果：图层位置、颜色、透明度、缩放、旋转、形状等插值变换

* Json 表情起始位置须按眼睛正常态输出

* 两个240 x 240 JSON格式表情过渡： 必须表情组件个数，名称，图层类型完全匹配，才会插入过渡帧

* 两个480 x 240 JSON格式表情过渡：必须表情组件个数，名称，图层类型完全匹配，才会插入过渡帧

* Json异型表情的过渡：异型表情由于其组件复杂，在切换过渡时，只会让异型表情恢复到初始位置。

## 五、JSON格式 异型表情图片资源命令规范

* JSON动画从AE导出时，对图片资源默认按照下图存放：

![Aaron Swartz](https://github.com/marklogg/images/blob/master/2.png?raw=true)

* 其中images目录存放了该动画用到的图片资源，并且.json文件配置了图片资源的相对路径（"u": "images/"）：

![Aaron Swartz](https://github.com/marklogg/images/blob/master/1.png?raw=true)

* 表情导入机器人时，由于机器人中images文件夹作为公共的JSON表情资源存放目录，异型表情图片资源不允许放在该文件夹下，需要一个独立的资源文件夹，并修改.json文件中key("u")对应的value
